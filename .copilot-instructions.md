# Copilot Instructions for p3-model

## Project Overview
p3-model is a C++ object model library for podcast production and publishing (P3) under the ultralove organization. This library provides comprehensive modeling capabilities for podcast workflows, content management, and publishing processes.

## Development Guidelines

### Language & Framework
- Primary language: C/C++
- Build system: CMake
- License: MIT License

### Code Style & Standards
- Follow modern C++ best practices (C++23 standard)
- Use RAII principles for resource management
- Prefer smart pointers over raw pointers
- Use const-correctness
- All function input parameters should be const (e.g., `void SetTitle(const std::string& title)`)
- All functions that return class data without modification should be const (e.g., `std::string GetTitle() const`)
- All destructors should be virtual (even when deleted)
- All abstract/interface classes should have a protected virtual destructor
- Always use modern C++ line comments (//) even for multi-line comments
- This style provides extra safety and consistency throughout the P3 model library codebase.
- Follow consistent naming conventions:
  - Types (classes, structs, enums): Upper PascalCase (e.g., `Episode`, `SharedObject`)
  - Functions/methods: Upper PascalCase (e.g., `GetTitle`, `SetDuration`)
  - Variables and function parameters: camelCase (e.g., `bufferSize`, `episodeCount`)
  - Member variables: camelCase with underscore postfix (e.g., `dataSize_`, `title_`)
  - Constants: UPPER_SNAKE_CASE (e.g., `MAX_EPISODE_LENGTH`)
- Remove redundant prefixes from class names (e.g., use `Model` instead of `P3Model`)

### Project Structure
- All source files must be in the `ultralove::p3::model` namespace
- Always use single-line namespace declarations (e.g., `namespace ultralove::p3::model {`)
- Keep source files organized in logical directories (e.g., `src/`, `include/`)
- Header files must use `.h` extension (not .hpp)
- Implementation files use `.cpp` extension
- File names should match the class name they contain in Upper PascalCase
  - Example: `Episode` class → `Episode.h` and `Episode.cpp`
  - Example: `SharedObject` class → `SharedObject.h` and `SharedObject.cpp`
- Use traditional include guards in all headers with format: `#ifndef __P3_FILENAME_H_INCL__`
  - Example: `#ifndef __P3_MODEL_H_INCL__` for p3-model.h
  - For multi-word filenames, convert PascalCase to UPPER_SNAKE_CASE
  - Example: `#ifndef __P3_SHARED_OBJECT_H_INCL__` for SharedObject.h
  - Convert hyphens to underscores in filenames
  - Always include project name (P3) and file name in uppercase
- All header files must specify 8-byte alignment using `#pragma pack(push, 8)` at the beginning and `#pragma pack(pop)` at the end
- Maintain clear separation between public API and implementation details
- Organize models by domain areas (e.g., content, production, publishing, metadata)

### CMake Guidelines
- Use modern CMake practices (4.0+)
- Always use Ninja generator for builds (`cmake -G Ninja -B _build`)
- Use version.in file for version management instead of hardcoding versions
- Organize CMakeLists.txt files hierarchically
- Use target-based approach with `target_*` commands
- Set appropriate compiler flags and warnings
- Default to Debug build type for development
- Create cmake/ directory for package config templates (e.g., `cmake/p3-model-config.cmake.in`)

### Documentation
- Document public APIs with clear comments
- Use detailed Doxygen-style comments in header files with traditional form:
  - Use /// for Doxygen comments
  - Use \param for parameters, \return for return values, \brief for brief descriptions
  - Example: /// \brief Sets the episode title
  ///         \param title The new title for the episode
- Implementation files (.cpp) should use inline documentation with // comments for logic explanation
- Keep README.md updated with build instructions and usage examples
- Document any dependencies and requirements

### Testing
- Write unit tests for core functionality
- Consider using a testing framework like Google Test or Catch2
- Maintain good test coverage

### Git Workflow
- Use meaningful commit messages following conventional commits format
- Keep commits atomic and focused
- Use feature branches for development
- When asked to commit changes:
  1. Stage all latest changes with `git add .`
  2. Write detailed but concise commit message using conventional commits
  3. Commit with `git commit -m "message"`
- Conventional commit format: `type(scope): description`
  - Types: feat, fix, docs, style, refactor, test, chore
  - Example: `feat(core): add initial model framework structure`

## Build Instructions
Current build process:
1. Configure with CMake using Ninja generator: `cmake -G Ninja -B _build`
2. Build the project: `cmake --build _build`
3. The build generates `libp3-model.a` static library

Version management:
- Version is stored in `version.in` file (currently 0.1.0)
- CMakeLists.txt reads version from this file automatically
- Update version by editing the `version.in` file

Build artifacts:
- Static library: `_build/libp3-model.a`
- CMake package files for integration with other projects

## Dependencies
Current dependencies:
- CMake 4.0+ (minimum required version)
- C++23 compatible compiler (tested with AppleClang 17.0.0)
- Ninja build system (preferred generator)

No external libraries currently required.

## Architecture Notes
This library models the podcast production and publishing domain, including:
- **Content Models**: Episodes, seasons, series, transcripts, show notes
- **Production Models**: Recording sessions, editing workflows, assets management
- **Publishing Models**: Distribution channels, RSS feeds, platform integrations
- **Metadata Models**: Categories, tags, ratings, analytics
- **User Models**: Hosts, guests, producers, listeners
- **Workflow Models**: Production pipelines, approval processes, scheduling

All models should be designed for:
- Serialization/deserialization support
- Validation and business rule enforcement
- Extensibility for future podcast industry standards
- Integration with external podcast platforms and tools

---
*Last updated: August 20, 2025*
