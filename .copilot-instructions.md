# Copilot Instructions for p3-model

## Project Overview
p3-model is a C++ object model library for podcast production and publishing (P3) under the ultralove organization. This library provides comprehensive modeling capabilities for podcast workflows, content management, and publishing processes.

## Development Guidelines

### Language & Framework
- Primary language: C/C++
- Build system: CMake
- License: MIT License

### Code Style & Standards
- Follow modern C++ best practices (C++23 standard)
- Use RAII principles for resource management
- Prefer smart pointers over raw pointers
- Use const-correctness
- All function input parameters should be const (e.g., `void SetTitle(const std::string& title)`)
- All functions that return class data without modification should be const (e.g., `std::string GetTitle() const`)
- All destructors should be virtual (even when deleted)
- All abstract/interface classes should have a protected virtual destructor
- Always use modern C++ line comments (//) even for multi-line comments
- This style provides extra safety and consistency throughout the P3 model library codebase.
- Follow consistent naming conventions:
  - Types (classes, structs, enums): Upper PascalCase (e.g., `Episode`, `SharedObject`)
  - Functions/methods: Upper PascalCase (e.g., `GetTitle`, `SetDuration`)
  - Variables and function parameters: camelCase (e.g., `bufferSize`, `episodeCount`)
  - Member variables: camelCase with underscore postfix (e.g., `dataSize_`, `title_`)
  - Constants: UPPER_SNAKE_CASE (e.g., `MAX_EPISODE_LENGTH`)
- Remove redundant prefixes from class names (e.g., use `Model` instead of `P3Model`)

### Project Structure
- All source files must be in the `ultralove::p3::model` namespace
- Always use single-line namespace declarations (e.g., `namespace ultralove::p3::model {`)
- Keep source files organized in logical directories (e.g., `src/`, `include/`)
- Header files must use `.h` extension (not .hpp)
- Implementation files use `.cpp` extension
- File names should match the class name they contain in Upper PascalCase
  - Example: `Episode` class → `Episode.h` and `Episode.cpp`
  - Example: `SharedObject` class → `SharedObject.h` and `SharedObject.cpp`
- Use traditional include guards in all headers with format: `#ifndef __P3_FILENAME_H_INCL__`
  - Example: `#ifndef __P3_MODEL_H_INCL__` for p3-model.h
  - For multi-word filenames, convert PascalCase to UPPER_SNAKE_CASE
  - Example: `#ifndef __P3_SHARED_OBJECT_H_INCL__` for SharedObject.h
  - Convert hyphens to underscores in filenames
  - Always include project name (P3) and file name in uppercase
- All header files must specify 8-byte alignment using `#pragma pack(push, 8)` at the beginning and `#pragma pack(pop)` at the end
- Maintain clear separation between public API and implementation details
- Organize models by domain areas (e.g., content, production, publishing, metadata)

### CMake Guidelines
- Use modern CMake practices (4.0+)
- Always use Ninja generator for builds (`cmake -G Ninja -B _build`)
- Use version.in file for version management instead of hardcoding versions
- Organize CMakeLists.txt files hierarchically
- Use target-based approach with `target_*` commands
- Set appropriate compiler flags and warnings
- Default to Debug build type for development
- Create cmake/ directory for package config templates (e.g., `cmake/p3-model-config.cmake.in`)

### Documentation
- Document public APIs with clear comments
- Use detailed Doxygen-style comments in header files with traditional form:
  - Use /// for Doxygen comments
  - Use \param for parameters, \return for return values, \brief for brief descriptions
  - Example: /// \brief Sets the episode title
  ///         \param title The new title for the episode
- Use Graphviz DOT for class diagrams and dependency diagrams:
  - Use @dot...@enddot blocks for custom graphs
  - Good for showing data flow, component relationships, and class structures
  - Use professional styling with white backgrounds and clear fonts
  - Example: @dot digraph example { ... } @enddot
- Implementation files (.cpp) should use inline documentation with // comments for logic explanation
- Keep README.md updated with build instructions and usage examples
- Document any dependencies and requirements

### Testing
- Write unit tests for core functionality
- Consider using a testing framework like Google Test or Catch2
- Maintain good test coverage

### Git Workflow
- Use meaningful commit messages following conventional commits format
- Keep commits atomic and focused
- Use feature branches for development
- When asked to commit changes:
  1. Stage all latest changes with `git add .`
  2. Write detailed but concise commit message using conventional commits
  3. Commit with `git commit -m "message"`
- Conventional commit format: `type(scope): description`
  - Types: feat, fix, docs, style, refactor, test, chore
  - Example: `feat(core): add initial model framework structure`

## Build Instructions
Current build process:
1. Configure with CMake using Ninja generator: `cmake -G Ninja -B _build`
2. Build the project: `cmake --build _build`
3. The build generates `libp3-model.a` static library

Documentation generation (requires Doxygen and LaTeX):
1. Generate LaTeX documentation: `cmake --build _build --target docs`
2. Build PDF from LaTeX: `cmake --build _build --target docs-pdf`
3. PDF output: `_build/docs/latex/p3-model.pdf`

Version management:
- Version is stored in `version.in` file (currently 0.1.0)
- CMakeLists.txt reads version from this file automatically
- Update version by editing the `version.in` file

Build artifacts:
- Static library: `_build/libp3-model.a`
- CMake package files for integration with other projects
- Documentation: `_build/docs/latex/p3-model.pdf` (when Doxygen is available)

## Project Status and Documentation

### Current Implementation Status
- **Core Library Structure**: Complete with Model struct as main entry point
- **Runtime Utilities**: GUID, String, TimeSpan, TimeStamp utilities implemented
- **Build System**: Modern CMake configuration with Ninja support
- **Documentation System**: Doxygen integration with PlantUML and LaTeX support
- **Version Management**: Automated through version.in file
- **README.md**: Comprehensive GitHub repository documentation complete

### Documentation Standards
- **README.md**: Comprehensive repository documentation following GitHub best practices
  - No emojis policy enforced
  - Includes quick start guide, architecture overview, code standards
  - Contributing guidelines with conventional commit format
  - Integration examples and build instructions
  - Professional tone with clear project structure visualization
- **API Documentation**: Generated with Doxygen
- **UML Diagrams**: Embedded PlantUML diagrams in headers using monochrome theme
- **Code Comments**: Inline documentation with // comments for implementation logic

## Dependencies
Current dependencies:
- CMake 4.0+ (minimum required version)
- C++23 compatible compiler (tested with AppleClang 17.0.0)
- Ninja build system (preferred generator)

Optional dependencies for documentation:
- Doxygen (for generating API documentation)
- LaTeX distribution (for PDF documentation generation)
- Graphviz dot (for dependency graphs and UML diagrams)

No external libraries currently required.

## Architecture Notes
This library models the podcast production and publishing domain, including:
- **Content Models**: Episodes, seasons, series, transcripts, show notes
- **Production Models**: Recording sessions, editing workflows, assets management
- **Publishing Models**: Distribution channels, RSS feeds, platform integrations
- **Metadata Models**: Categories, tags, ratings, analytics
- **User Models**: Hosts, guests, producers, listeners
- **Workflow Models**: Production pipelines, approval processes, scheduling

All models should be designed for:
- Serialization/deserialization support
- Validation and business rule enforcement
- Extensibility for future podcast industry standards
- Integration with external podcast platforms and tools

### PlantUML Styling
- Use the monochrome theme located at `docs/plantuml-monochrome.puml`
- Include the theme in all PlantUML diagrams with: `!include docs/plantuml-monochrome.puml`
- This ensures consistent black-and-white professional styling across all documentation
- The theme defines pure white background with black text and borders for all diagram elements
- Example usage in header files:
```cpp
/*!
 * @startuml
 * !include docs/plantuml-monochrome.puml
 * class Model {
 *   +GetVersion() : string
 *   +Initialize() : bool
 * }
 * @enduml
 */
```

## Recent Changes and Updates

### August 20, 2025
- **Documentation Build System Update**: Reverted to Graphviz for better diagram quality
  - Removed PlantUML dependency and JAR detection from CMakeLists.txt
  - Replaced all PlantUML diagrams with professional Graphviz DOT diagrams
  - Re-enabled Graphviz integration with DOXYGEN_HAVE_DOT YES
  - Updated all header files to use @dot...@enddot syntax instead of @startuml...@enduml
  - Improved diagram aesthetics with professional styling and clean layouts
- **README.md Enhancement**: Added comprehensive GitHub repository documentation
  - Complete project overview with feature descriptions
  - Quick start guide with step-by-step build instructions
  - Architecture documentation and code standards reference
  - Contributing guidelines with conventional commit format
  - Version management, support information, and development roadmap
  - Professional formatting without emojis, following markdown best practices
  - Integration examples for library usage
- **Git Workflow**: Implemented conventional commit standards
  - Commit: `f1a0762` - docs(readme): add comprehensive README.md for GitHub repository
  - 215 insertions, 1 deletion in README.md file

### Development Notes
- All future documentation should maintain consistency with README.md standards
- Continue following the no-emoji policy for all project documentation
- Maintain professional tone across all user-facing documentation
- Update README.md as new features are implemented and architecture evolves

---
*Last updated: August 20, 2025*
*Recent changes: Added comprehensive README.md documentation and established documentation standards*
